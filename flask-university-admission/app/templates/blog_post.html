{% extends "base.html" %}

{% block content %}
<article>
  <h1>{{ post.title }}</h1>
  <p><em>Published on {{ post.created_at.strftime("%b %d, %Y") }} by {{ post.author.name }}</em></p>
  
  <!-- Use the rendered HTML instead of raw -->
  <div>{{ rendered_content|safe }}</div>
</article>

{% if current_user.is_authenticated and (current_user.role == "admin" or current_user.id == post.author_id) %}
  <form action="{{ url_for('blog.delete_post', post_id=post.id) }}" method="POST">
    <button type="submit" style="color:red;">🗑 Delete Post</button>
  </form>
{% endif %}

<a href="{{ url_for('blog.blog_list_view') }}">← Back to blog</a>
{% endblock %}
